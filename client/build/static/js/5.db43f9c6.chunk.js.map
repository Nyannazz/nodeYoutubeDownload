{"version":3,"sources":["api/api.js","components/Searchbar.jsx","components/Loading.jsx","components/Banner.jsx","../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","components/VideoListCard.jsx","components/VideoList.jsx","components/usePrevious.js","components/VideoSearch.jsx","components/YoutubeSearch.jsx"],"names":["BASEURL","downloaderUrl","getVideoData","videoUrl","a","fetch","response","status","Error","json","downloadVideo","itag","name","metadata","progressCallback","progress","console","log","doneCallBack","axios","url","method","responseType","onDownloadProgress","progressEvent","loaded","then","container","format","saveAs","Blob","data","Date","now","catch","error","downloadMp3","mp3Data","writer","ID3Writer","title","artist","setFrame","addTag","blob","getBlob","downloadMp3Fast","getFileSize","searchVideo","query","page","ok","statusText","Searchbar","onSubmit","placeholder","match","useState","inputVal","setInputVal","useEffect","params","decodeURIComponent","event","preventDefault","id","className","value","onChange","target","type","required","Loading","Banner","text","alt","src","icon","_toConsumableArray","arr","Array","isArray","i","arr2","length","iter","Symbol","iterator","Object","prototype","toString","call","from","TypeError","_defineProperty","obj","key","defineProperty","enumerable","configurable","writable","VideoListCard","video","videoID","link","to","thumbnail","VideoList","videos","map","index","ref","useRef","current","removeDouble","b","bLen","aLen","j","splice","loadedPages","Set","PageNav","Number","VideoSearch","location","history","setData","setError","prevPage","usePrevious","prevQuery","has","add","currentPage","videoState","firstId","findIndex","item","lastId","state","clear","YoutubeSearch","path","render","push","pathname","encodeURIComponent","component"],"mappings":"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","file":"static/js/5.db43f9c6.chunk.js","sourcesContent":["import ID3Writer from 'browser-id3-writer'\r\nimport {\r\n  saveAs\r\n} from 'file-saver'\r\nimport axios from 'axios'\r\n//const BASEURL = \"http://localhost:5000/api\" /*  || \"http://82.165.121.77:5000\" */\r\nconst BASEURL = \"/api\"\r\nconst downloaderUrl = BASEURL + \"/ytdl\"\r\n//const searchUrl = BASEURL + \"/search\"\r\nconst downloadProxyUrl = BASEURL + \"/dlproxy\"\r\n\r\nexport async function getVideoData(videoUrl) {\r\n  const response = await fetch(`${downloaderUrl}/simpleinfo?videolink=${videoUrl}`);\r\n  if (response.status >= 400) throw new Error(response)\r\n  return await response.json();\r\n\r\n}\r\n\r\n\r\n\r\nexport function downloadVideo(videoUrl, itag, name, metadata, progressCallback = (progress) => console.log(progress), doneCallBack = (progress) => console.log(progress)) {\r\n  axios({\r\n    url: `${downloaderUrl}/download?videolink=${videoUrl}${itag?`&format=${itag}`:\"\"}`,\r\n    method: \"GET\",\r\n    responseType: \"arraybuffer\",\r\n    onDownloadProgress: metadata ? (progressEvent) => {\r\n      console.log(progressEvent.loaded)\r\n      progressCallback(progressEvent.loaded)\r\n    } : null\r\n  }).then((response) => {\r\n    const container = metadata ? metadata.format.container : \"mp4\"\r\n    saveAs(new Blob([response.data]), name ? `${name}.${container}` : `video${Date.now()}.mp4`);\r\n    doneCallBack(\"finished\");\r\n  }).catch(error => {\r\n    console.log(error)\r\n    doneCallBack(\"failed! :(\");\r\n\r\n  })\r\n}\r\n\r\nexport function directDownloadVideo(videoUrl, itag) {\r\n  window.open(`${downloaderUrl}/downloadmp3?videolink=${videoUrl}${itag?`&format=${itag}`:\"\"}`, '_blank');\r\n}\r\n\r\n\r\nexport function downloadMp3(videoUrl, itag, name, metadata, mp3Data, progressCallback = (progress) => console.log(progress), doneCallBack = (progress) => console.log(progress)) {\r\n  axios({\r\n    url: `${downloaderUrl}/downloadmp3?videolink=${videoUrl}${itag?`&format=${itag}`:\"\"}`,\r\n    method: \"GET\",\r\n    responseType: \"arraybuffer\",\r\n    onDownloadProgress: metadata ? (progressEvent) => {\r\n      progressCallback(progressEvent.loaded)\r\n    } : null\r\n  }).then((response) => {\r\n\r\n\r\n    const writer = new ID3Writer(response.data);\r\n    if (mp3Data) {\r\n      const {\r\n        title,\r\n        artist,\r\n        /* cover */\r\n      } = mp3Data;\r\n      if (title) writer.setFrame('TIT2', title)\r\n      if (artist) writer.setFrame('TPE1', [artist])\r\n      /* if (cover) {\r\n        console.log(cover)\r\n        getCorsImage(cover, (buffer)=>{\r\n          writer.setFrame('APIC', {\r\n            type: 3,\r\n            data: buffer,\r\n            description: 'cover'\r\n        })\r\n        })\r\n\r\n      } */\r\n    }\r\n    writer.addTag();\r\n\r\n    const blob = writer.getBlob();\r\n\r\n    saveAs(blob, name ? `${name}.mp3` : `music${Date.now()}.mp3`);\r\n    doneCallBack(\"finished\");\r\n  }).catch(error => {\r\n    console.log(error)\r\n    doneCallBack(\"failed! :(\");\r\n\r\n  })\r\n\r\n\r\n}\r\n\r\nexport function downloadMp3Fast(videoUrl, itag, name, metadata, mp3Data, progressCallback = (progress) => console.log(progress), doneCallBack = (progress) => console.log(progress)) {\r\n  axios({\r\n    url: `${downloaderUrl}/downloadmp3?videolink=${videoUrl}${itag?`&format=${itag}`:\"\"}`,\r\n    method: \"GET\",\r\n    responseType: \"arraybuffer\",\r\n    onDownloadProgress: metadata ? (progressEvent) => {\r\n      progressCallback(progressEvent.loaded)\r\n    } : null\r\n  }).then((response) => {\r\n\r\n\r\n    const writer = new ID3Writer(response.data);\r\n    if (mp3Data) {\r\n      const {\r\n        title,\r\n        artist,\r\n      } = mp3Data;\r\n      if (title) writer.setFrame('TIT2', title)\r\n      if (artist) writer.setFrame('TPE1', [artist])\r\n\r\n    }\r\n    writer.addTag();\r\n\r\n    const blob = writer.getBlob();\r\n\r\n    saveAs(blob, name ? `${name}.mp3` : `music${Date.now()}.mp3`);\r\n    doneCallBack(\"finished\");\r\n  }).catch(error => {\r\n    console.log(error)\r\n    doneCallBack(\"failed! :(\");\r\n\r\n  })\r\n\r\n\r\n}\r\n\r\nexport function directDownloadMp3(videoUrl, itag) {\r\n  window.open(`${downloaderUrl}/downloadmp3?videolink=${videoUrl}${itag?`&format=${itag}`:\"\"}`, '_blank');\r\n}\r\n\r\n\r\n\r\n/* function getCorsImage(url, cb) {\r\n  const link = `${downloadProxyUrl}?link=${url}`\r\n  fetch(link).then(response => {\r\n    if (!response.ok) {\r\n      throw new Error(response.statusText)\r\n    }\r\n\r\n    return response.arrayBuffer();\r\n  }).then(buffer => {\r\n    cb(buffer)\r\n  }).catch(e => console.log(e))\r\n} */\r\n\r\n\r\nexport function getFileSize(videoUrl, itag) {\r\n  return axios({\r\n    url: `${downloaderUrl}/getsize?videolink=${videoUrl}${itag?`&format=${itag}`:\"\"}`,\r\n    method: \"GET\",\r\n  })\r\n}\r\n\r\nexport function searchVideo(query, page) {\r\n  return fetch(`${BASEURL}/search?q=${query}${page? \"&page=\"+page: \"\"}`)\r\n    .then(response => {\r\n      //console.log(response)\r\n      if (!response.ok) throw Error(response.statusText)\r\n      return response.json();\r\n    })\r\n}","import React, {useState, useEffect} from 'react'\r\n\r\nconst Searchbar = ({onSubmit, placeholder=\"SEARCH FOR YOUTUBE URL\", match}) => {\r\n    const [inputVal, setInputVal]=useState(\"\")\r\n    useEffect(() => {\r\n        if(match.params.query) setInputVal(decodeURIComponent(match.params.query));\r\n        else setInputVal(\"\");\r\n    }, [match.params.query])\r\n    return (\r\n        <form \r\n            onSubmit={(event) => {\r\n                    event.preventDefault(); \r\n                    onSubmit(inputVal);\r\n                }\r\n            } \r\n            id=\"searchbar\" \r\n            className=\"margin0Auto\"\r\n        >\r\n            <input value={inputVal} onChange={(event)=>setInputVal(event.target.value)} placeholder={placeholder} type=\"text\" id=\"searchText\" required />\r\n            <input type=\"submit\" value=\"SEARCH\" id=\"searchSubmit\" />\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Searchbar\r\n","import React from 'react'\r\n\r\nconst Loading = () => {\r\n    return (\r\n        <div className=\"loading centerText textUpper\">\r\n            LOADING...\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Loading\r\n","import React from 'react'\r\nimport icon from '../img/coon.png'\r\n\r\nconst Banner = ({text=\"YOUTUBE COON\"}) => {\r\n    return (\r\n        <div id=\"banner\" className=\"centerText\">\r\n            <img alt=\"panda\" src={icon}/>\r\n            <h1>{text}</h1>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Banner\r\n","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import React from \"react\";\r\nimport {Link} from 'react-router-dom'\r\n\r\nconst VideoListCard = ({ video }) => {\r\n  const videoID=video && video.link? video.link.match(/.*(?:youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=)([^#\\&\\?]*).*/)[1] : \"\";\r\n  return (\r\n    <Link to={`/video/${videoID}`}>\r\n      <div id=\"videoListCard\" className=\"pointer\">\r\n        <img alt=\"video thumbnail\" src={video.thumbnail} />\r\n        <h3>{video.title}</h3>\r\n      </div>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default VideoListCard;\r\n","import React from 'react'\r\nimport VideoListCard from './VideoListCard'\r\n\r\nconst VideoList = ({videos=[]}) => {\r\n    return (\r\n        <section id=\"videoList\">\r\n            {videos.map((video, index)=><VideoListCard key={video.link+\"_\"+index} video={video}/>)}\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default VideoList\r\n","import { useEffect, useRef } from 'react';\r\n\r\n\r\n\r\nexport default function(value) {\r\n    // The ref object is a generic container whose current property is mutable ...\r\n    // ... and can hold any value, similar to an instance property on a class\r\n    const ref = useRef();\r\n    \r\n    // Store current value in ref\r\n    useEffect(() => {\r\n      ref.current = value;\r\n    }, [value]); // Only re-run if value changes\r\n    \r\n    // Return previous value (happens before update in useEffect above)\r\n    return ref.current;\r\n  }","import React, { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport VideoList from './VideoList'\r\nimport Loading from './Loading'\r\nimport { searchVideo } from '../api/api'\r\nimport usePrevious from './usePrevious'\r\n\r\n// api sometimes gives overlapping videos so filter out videos that are already in array (a)\r\nconst removeDouble = (a, b) => {\r\n    const bLen = b.length;\r\n    const aLen = a.length;\r\n    for (let i = bLen - 1; i >= 0; i--) {\r\n        for (let j = 0; j < aLen; j++) {\r\n            if (a[j].link === b[i].link) {\r\n                b.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return b;\r\n}\r\n\r\n\r\nconst loadedPages = new Set()\r\n\r\nconst VideoSearch = ({ match, history, location }) => {\r\n    const [data, setData] = useState(null)\r\n    const [error, setError] = useState(null)\r\n\r\n    const prevPage = usePrevious(match.params.page || 1);\r\n    const prevQuery = usePrevious(match.params.query);\r\n\r\n    useEffect(() => {\r\n        /* load extra pages */\r\n        /* if the page changes: check if we still search for the same term (query) and if we dont already have this page then load more videos :)*/\r\n        if (prevQuery === match.params.query &&\r\n            !loadedPages.has(match.params.page)\r\n        ) {\r\n            /* console.log(\"load extra pages\") */\r\n            setError(null)\r\n            searchVideo(match.params.query, match.params.page)\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    setError(true)\r\n                })\r\n                .then(json => {\r\n                    loadedPages.add(match.params.page)\r\n                    if (prevPage > match.params.page) {\r\n                        //console.log(\"loading prev\")\r\n                        return setData({ ...json, videos: [...removeDouble(data.videos, json.videos), ...data.videos] })\r\n                    }\r\n                    //console.log(\"loading next\")\r\n                    setData({ ...json, videos: [...data.videos, ...removeDouble(data.videos, json.videos)] })\r\n\r\n                })\r\n        }\r\n    }, [data.videos, match.params.page, match.params.query, prevPage, prevQuery])\r\n\r\n\r\n    /* add another hook that fires when url didnt actually change but forceRefresh state is set so stale data can be replaced */\r\n    useEffect(() => {\r\n        /* console.log(location.state); */\r\n        const currentPage = match.params.page || 1;\r\n        /* only refresh if page and query is the same just another state was set to force a rerender */\r\n        if (prevQuery === match.params.query && currentPage === prevPage) {\r\n            /* console.log(\"reload stuff\") */\r\n            searchVideo(match.params.query, match.params.page)\r\n                .catch(error => {\r\n                    console.log(error)\r\n                    setError(true)\r\n                })\r\n                .then(json => {\r\n\r\n                    if (!json || !json.videos || !Array.isArray(json.videos)) return console.log(\"no data received\");\r\n                    loadedPages.add(match.params.page)\r\n                    /* if the requested data has more entries just replace the state */\r\n                    if (!data.length || json.length > data.length) return setData(json)\r\n\r\n                    /* else if the requested data is most likely inside the state or at least a part of it splice the new data into it */\r\n                    const videoState = [...data]\r\n                    const firstId = videoState.findIndex(item => item.link === json[0].link) || 0;\r\n                    const lastId = videoState.findIndex(item => item.link === json[json.length - 1].link) || 0;\r\n\r\n                    videoState.splice(firstId, lastId - firstId, ...json);\r\n                    setData(videoState);\r\n                })\r\n        }\r\n    }, [data, location.state, match.params.page, match.params.query, prevPage, prevQuery])\r\n\r\n\r\n    useEffect(() => {\r\n        /* load initial data */\r\n        /* console.log(\"initial data load\") */\r\n        setError(null)\r\n        searchVideo(match.params.query, match.params.page)\r\n            .catch(error => {\r\n                console.log(error)\r\n                setError(true)\r\n            })\r\n            .then(json => {\r\n                loadedPages.clear();\r\n                loadedPages.add(match.params.page)\r\n                setData(json)\r\n            })\r\n\r\n        return () => {\r\n            loadedPages.clear();\r\n        };\r\n    }, [match.params.page, match.params.query])\r\n\r\n\r\n\r\n    if (error) return <Link to=\"/search\"><h1 className=\"centerText errorMessage\">SEARCH FAILED!</h1></Link>\r\n    if (data && data.videos.length) {\r\n        return (\r\n            <>\r\n                <VideoList videos={data.videos} />\r\n\r\n                {/* loading additional pages seems to only work once so take it out for now */}\r\n                <PageNav page={match.params.page} query={match.params.query} />\r\n\r\n            </>\r\n        )\r\n    }\r\n\r\n    return <Loading />\r\n}\r\n\r\nconst PageNav = ({ page = 1, query }) => {\r\n    return (\r\n        <div id=\"pageNavContainer\">\r\n            {page > 1 &&\r\n                <Link to={`/search/${query}/${Number(page) - 1}`} className=\"undecoratedLink centerText\">\r\n                    <h3 id=\"videoSearchNav\" >PREV</h3>\r\n                </Link>\r\n            }\r\n            <Link to={`/search/${query}/${Number(page) + 1}`} className=\"undecoratedLink centerText\">\r\n                <h3 id=\"videoSearchNav\" >NEXT</h3>\r\n            </Link>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default VideoSearch\r\n","import React from 'react'\r\nimport { Route } from 'react-router-dom'\r\nimport Searchbar from './Searchbar'\r\nimport VideoSearch from './VideoSearch'\r\nimport Banner from './Banner'\r\n\r\n\r\nconst YoutubeSearch = ({ history, match }) => {\r\n    //console.log(match)\r\n    return (\r\n        <div className=\"inner\">\r\n            <Banner text=\"YOUTUBE COON <SEARCH>\"/>\r\n            <Route path=\"/search/:query?\"\r\n                render={({ match }) =>\r\n                    <Searchbar\r\n                        match={match}\r\n                        placeholder=\"SEARCH FOR VIDEO\"\r\n                        onSubmit={(inputVal) => history.push({pathname: `/search/${encodeURIComponent(inputVal)}/1`, state: Date.now()})}\r\n                    />}\r\n            />\r\n            <Route path=\"/search/:query/:page?\" component={VideoSearch} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default YoutubeSearch\r\n"],"sourceRoot":""}